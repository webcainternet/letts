!function(a){a.fn.FA_Modal=function(b){if(0==this.length)return!1;this.length>1&&this.each(function(){return a(this).FA_Modal(b)});var c,d,e,f,g,h,i,j,k={iframeLoaded:function(){},onClose:function(){},doAction:function(){},hide_action:!1,close_txt:!1,title_txt:!1,closeOnAction:!0},l=this,b=a.extend({},k,b),m=function(){return c=a(l).attr("href"),d=a(l).data("target"),e=a("#"+d).find(".media-frame-content"),title=a("#"+d).find(".media-frame-title h1"),f=a("#"+d).find(".fapro-cancel-action"),g=a("#"+d).find(".media-modal-close"),h=a("#"+d).find(".fapro-make-action"),loadCount=0,j=a("<div />",{"class":"fa_overlay"}),a(l).click(function(k){k.preventDefault(),b.hide_action?a(h).hide():a(h).show(),b.close_txt&&a(f).html(b.close_txt),a(title).html(b.title_txt?b.title_txt:title.data("title")),a("#"+d).show(),a(e).empty(),j.appendTo(a(e)),i=a("<iframe/>",{src:c,width:"100%",height:"100%",scrolling:"yes"}).appendTo(e),i.load(function(){j.hide();var c=a(i).contents().find("form");c.length>0&&a(c).submit(function(){j.show()}),b.iframeLoaded.call(l,{iframe:i,count:loadCount}),loadCount++}),a(f).unbind("click"),a(f).click(function(c){c.preventDefault(),a(e).empty(),a("#"+d).hide(),b.onClose.call(l,{iframe:i,count:loadCount}),loadCount=0}),a(g).unbind("click"),a(g).click(function(c){c.preventDefault(),a(e).empty(),a("#"+d).hide(),b.onClose.call(l,{iframe:i,count:loadCount}),loadCount=0}),a(h).unbind("click"),a(h).click(function(c){c.preventDefault(),b.doAction.call(l,{iframe:i,count:loadCount}),b.closeOnAction&&(a(e).empty(),a("#"+d).hide(),b.onClose.call(l,{iframe:i,count:loadCount}),loadCount=0)})}),l};return this.close=function(){a("#"+d).hide(),b.onClose.call(l,{iframe:i,count:loadCount}),loadCount=0},m()}}(jQuery);