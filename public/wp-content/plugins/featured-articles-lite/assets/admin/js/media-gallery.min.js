!function(a){var b,c=wp.media.model.settings.post.id,d=0;a(document).on("click",".fa_upload_image_button",function(e){var f=this;if(e.preventDefault(),a(f).data("file_frame"))return b=a(f).data("file_frame"),b.uploader.uploader.param("post_id",d),void b.open();wp.media.model.settings.post.id=d,b=wp.media.frames.file_frame=wp.media({frame:"select",library:{type:"image"},title:a(this).data("title"),button:{text:a(this).data("text")},multiple:a(this).data("multiple")}),a(f).data("file_frame",b);var g=a(this).data("update");b.on("select",function(){if(attachment=b.state().get("selection").toJSON(),attachment.length>0){var d=[];a.each(attachment,function(){d.push(this.id)});var e={action:a(f).data("ajax_action")||faEditSlider.assign_image_ajax_action,post_id:a("#post_ID").val(),images:d};e[faEditSlider.assign_image_nonce.name]=faEditSlider.assign_image_nonce.nonce,a.ajax({url:ajaxurl,data:e,dataType:"json",type:"POST",success:function(b){b.success&&(a(f).trigger("ajaxload",b.data),a(f).data("append")&&(a(g).empty().append(b.data),"undefined"!=typeof fa_edit_slides&&a.isFunction(fa_edit_slides)&&fa_edit_slides()))}})}a(".wp-full-overlay").css({"z-index":"500000"}),wp.media.model.settings.post.id=c}),b.on("escape",function(){a(".wp-full-overlay").css({"z-index":"500000"})}),b.on("open",function(){var c=b.state().get("selection");a(".wp-full-overlay").css({"z-index":"auto"});var d=a(g).find(".fa-slide-image");d.length>0&&a.each(d,function(){var b=a(this).data("post_id"),d=wp.media.attachment(b);d.fetch(),c.add(d?[d]:[])})}),b.open()}),jQuery("a.add_media").on("click",function(){wp.media.model.settings.post.id=c})}(jQuery);